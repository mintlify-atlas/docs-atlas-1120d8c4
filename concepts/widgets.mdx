---
title: 'Widget System'
description: 'VNodes, widget props, and composition patterns'
icon: 'cube'
---

Rezi's widget system is built on **VNodes** (virtual nodes) — lightweight plain objects that describe your UI declaratively.

## VNode Concept

A VNode is a plain JavaScript object with three key properties:

```typescript
type VNode = {
  kind: 'text' | 'box' | 'button' | ...,
  props: Record<string, unknown>,
  children?: VNode[],
}
```

**You never construct VNodes manually.** Instead, use the `ui.*` factory functions:

```typescript
import { ui } from '@rezi-ui/core';

const myTree = ui.column({ gap: 1 }, [
  ui.text('Hello, World!'),
  ui.button({ id: 'ok', label: 'OK' }),
]);
```

Each `ui.*` function returns a properly-typed VNode for that widget kind.

## Widget Factory Functions

The `ui` namespace provides 60+ factory functions organized by category:

### Structural Widgets

Container and layout widgets:

<CodeGroup>
```typescript Layout Containers
ui.box({ border: 'single', p: 1 }, children)
ui.row({ gap: 1, align: 'center' }, children)
ui.column({ gap: 2, justify: 'between' }, children)
ui.grid({ columns: 3, gap: 1 }, children)
```

```typescript Spacing
ui.spacer({ size: 2 })
ui.divider({ style: { fg: 'gray' } })
```
</CodeGroup>

### Content Widgets

Display information:

<CodeGroup>
```typescript Text
ui.text('Hello, World!')
ui.text('Bold text', { bold: true })
ui.text('Large heading', { variant: 'heading' })
```

```typescript Rich Content
ui.richText([
  { text: 'Bold', bold: true },
  { text: ' and ' },
  { text: 'colored', fg: 'blue' },
])

ui.icon('check', { fg: 'green' })
ui.badge('NEW', { variant: 'primary' })
ui.callout('Important message', { variant: 'warning' })
```
</CodeGroup>

### Interactive Widgets

Accept user input:

<CodeGroup>
```typescript Buttons
ui.button({
  id: 'submit',
  label: 'Submit',
  intent: 'primary',
  onPress: () => handleSubmit(),
})
```

```typescript Inputs
ui.input({
  id: 'email',
  value: state.email,
  placeholder: 'Enter email',
  onInput: value => app.update(s => ({ ...s, email: value })),
})

ui.textarea({
  id: 'bio',
  value: state.bio,
  rows: 5,
  onInput: value => app.update(s => ({ ...s, bio: value })),
})
```

```typescript Selection
ui.checkbox({
  id: 'agree',
  label: 'I agree to the terms',
  checked: state.agreed,
  onChange: checked => app.update(s => ({ ...s, agreed: checked })),
})

ui.select({
  id: 'theme',
  value: state.theme,
  options: ['light', 'dark', 'auto'],
  onChange: theme => app.update(s => ({ ...s, theme })),
})

ui.radioGroup({
  id: 'size',
  value: state.size,
  options: [{ value: 'sm', label: 'Small' }, { value: 'lg', label: 'Large' }],
  onChange: size => app.update(s => ({ ...s, size })),
})

ui.slider({
  id: 'volume',
  value: state.volume,
  min: 0,
  max: 100,
  onChange: volume => app.update(s => ({ ...s, volume })),
})
```
</CodeGroup>

### Data Widgets

Display structured data:

<CodeGroup>
```typescript Tables
ui.table({
  id: 'users',
  columns: [
    { key: 'name', title: 'Name' },
    { key: 'email', title: 'Email' },
  ],
  rows: state.users,
  onRowPress: user => viewDetails(user),
})
```

```typescript Lists
ui.virtualList({
  items: state.messages,
  height: 20,
  renderItem: (msg, i) => ui.text(`${i}: ${msg}`),
})

ui.tree({
  id: 'file-tree',
  nodes: state.fileTree,
  onNodePress: node => openFile(node),
})
```
</CodeGroup>

### Overlay Widgets

Modal interfaces:

<CodeGroup>
```typescript Modals
ui.modal({
  id: 'confirm-delete',
  title: 'Confirm Delete',
  open: state.showDeleteModal,
  content: ui.column({ gap: 1 }, [
    ui.text('Are you sure you want to delete this item?'),
    ui.actions([
      ui.button({ id: 'cancel', label: 'Cancel', intent: 'secondary' }),
      ui.button({ id: 'confirm', label: 'Delete', intent: 'danger' }),
    ]),
  ]),
})
```

```typescript Dropdowns
ui.dropdown({
  id: 'actions',
  trigger: ui.button({ id: 'more', label: 'More...' }),
  items: [
    { id: 'edit', label: 'Edit' },
    { id: 'delete', label: 'Delete' },
  ],
  onSelect: id => handleAction(id),
})
```

```typescript Toasts
ui.toastContainer({
  toasts: state.toasts,
  position: 'top-right',
})
```
</CodeGroup>

### Feedback Widgets

Loading and error states:

<CodeGroup>
```typescript Loading
ui.spinner({ text: 'Loading...' })

ui.progress({
  value: state.uploadProgress,
  max: 100,
  label: 'Uploading',
})

ui.skeleton({ width: 20, height: 3 })
```

```typescript Errors
ui.errorDisplay(
  'Failed to load data',
  { title: 'Error', showStack: true }
)

ui.errorBoundary(
  { fallback: error => ui.text(`Error: ${error.message}`) },
  children
)
```
</CodeGroup>

## Widget Props and Types

Every widget has a corresponding props interface:

```typescript
import type { ButtonProps, InputProps } from '@rezi-ui/core';

const buttonProps: ButtonProps = {
  id: 'submit',
  label: 'Submit',
  intent: 'primary',
  onPress: () => handleSubmit(),
};

const inputProps: InputProps = {
  id: 'email',
  value: state.email,
  placeholder: 'Enter email',
  onInput: value => updateEmail(value),
};
```

### Common Prop Patterns

#### `key` for Reconciliation

When rendering **dynamic lists**, always provide a `key` prop:

```typescript
ui.column(
  items.map(item => 
    ui.text(item.name, { key: item.id })
  )
)
```

<Warning>
  Without keys, Rezi cannot track which items changed, added, or removed. This leads to incorrect reconciliation and lost widget state.
</Warning>

#### `id` for Interactivity

**All focusable widgets** require an `id` prop:

```typescript
// ✅ Correct
ui.button({ id: 'submit', label: 'Submit' })
ui.input({ id: 'email', value: '' })

// ❌ Runtime error
ui.button({ label: 'Submit' })  // Missing id!
```

The `id` is used for:
- **Focus management**: Tab/Shift+Tab navigation
- **Event routing**: Which button was pressed
- **Focus restoration**: After modal closes

### Styling Props

Many widgets accept a `style` prop for visual customization:

```typescript
import type { TextStyle } from '@rezi-ui/core';

const style: TextStyle = {
  fg: 'blue',        // Foreground color
  bg: 'white',       // Background color
  bold: true,        // Bold text
  italic: false,
  underline: false,
  strikethrough: false,
};

ui.text('Styled text', { style });
```

### Layout Constraint Props

Control widget dimensions:

```typescript
ui.box({
  width: 40,           // Fixed width (cells)
  height: 10,          // Fixed height (cells)
  minWidth: 20,        // Minimum width
  maxWidth: 60,        // Maximum width
  flex: 1,             // Flex grow factor
  flexShrink: 0,       // Disable shrinking
  flexBasis: 30,       // Initial flex size
})
```

### Spacing Props

Padding and margin:

```typescript
ui.box({
  p: 2,          // All sides
  px: 3,         // Horizontal (left + right)
  py: 1,         // Vertical (top + bottom)
  pt: 1,         // Top only
  pr: 2,         // Right only
  pb: 1,         // Bottom only
  pl: 2,         // Left only
})
```

Accepts numbers (cells) or spacing keys (`'xs'`, `'sm'`, `'md'`, `'lg'`, `'xl'`, `'2xl'`).

## Basic Composition Patterns

### Nested Containers

```typescript
ui.page({ p: 1 }, [
  ui.panel('User Profile', [
    ui.column({ gap: 1 }, [
      ui.text(state.user.name, { variant: 'heading' }),
      ui.text(state.user.email, { variant: 'caption' }),
      ui.divider(),
      ui.text(state.user.bio),
    ]),
  ]),
])
```

### Conditional Rendering

```typescript
import { show, when } from '@rezi-ui/core';

// Simple conditional
ui.column([
  show(state.isLoggedIn, () => ui.text('Welcome back!')),
  when(state.error, error => ui.errorDisplay(error)),
])

// Multiple branches
import { match } from '@rezi-ui/core';

match(state.status, {
  'loading': () => ui.spinner({ text: 'Loading...' }),
  'success': () => ui.text('Success!'),
  'error': () => ui.errorDisplay('Failed'),
})
```

### List Rendering

```typescript
import { each } from '@rezi-ui/core';

ui.column(
  each(state.items, (item, i) => 
    ui.row({ gap: 1, key: item.id }, [
      ui.text(`${i + 1}.`),
      ui.text(item.name),
      ui.button({
        id: `delete-${item.id}`,
        label: 'Delete',
        intent: 'danger',
      }),
    ])
  )
)
```

### Reusable Fragments

```typescript
function renderUserCard(user: User) {
  return ui.box({ border: 'rounded', p: 1 }, [
    ui.text(user.name, { variant: 'heading' }),
    ui.text(user.email, { variant: 'caption' }),
  ]);
}

app.view(state => 
  ui.column(
    state.users.map(user => renderUserCard(user))
  )
);
```

<Info>
  For components with **local state**, use `defineWidget()` instead of plain functions. See [Composition](/concepts/composition).
</Info>

## Design System Integration

Rezi provides **design system props** for consistent styling:

```typescript
ui.button({
  id: 'submit',
  label: 'Submit',
  dsVariant: 'solid',      // solid | soft | outline | ghost
  dsTone: 'primary',       // primary | secondary | success | danger | warning
  dsSize: 'md',            // sm | md | lg
})

// Or use intent shortcuts
ui.button({
  id: 'submit',
  label: 'Submit',
  intent: 'primary',       // Maps to dsVariant + dsTone
})
```

### Button Intent Shortcuts

| Intent | Maps to | Use for |
|--------|---------|----------|
| `primary` | solid + primary | Main CTA (Save, Submit) |
| `secondary` | soft + default | Secondary actions (Cancel, Back) |
| `danger` | outline + danger | Destructive actions (Delete) |
| `success` | soft + success | Positive confirmations |
| `warning` | soft + warning | Caution actions |
| `link` | ghost + default | Minimal/link-style actions |

## Next Steps

<CardGroup cols={2}>
  <Card title="Composition" icon="puzzle-piece" href="/concepts/composition">
    Build reusable components with defineWidget
  </Card>
  <Card title="Widget Catalog" icon="books" href="/widgets/overview">
    Explore all 60+ built-in widgets
  </Card>
  <Card title="Layout" icon="table-cells" href="/guides/layout">
    Learn about the layout engine
  </Card>
  <Card title="Theming" icon="palette" href="/guides/theming">
    Customize colors and spacing
  </Card>
</CardGroup>